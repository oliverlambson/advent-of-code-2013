from pt1 import has_symbol_neighbor, get_number_mask


def test_get_number_mask():
    raw_matrix = [
        ["4", "6", "7", ".", ".", "1", "1", "4", ".", "."],
        [".", ".", ".", "*", ".", ".", ".", ".", ".", "."],
        [".", ".", "3", "5", ".", ".", "6", "3", "3", "."],
        [".", ".", ".", ".", ".", ".", "#", ".", ".", "."],
        ["6", "1", "7", "*", ".", ".", ".", ".", ".", "."],
        [".", ".", ".", ".", ".", "+", ".", "5", "8", "."],
        [".", ".", "5", "9", "2", ".", ".", ".", ".", "."],
        [".", ".", ".", ".", ".", ".", "7", "5", "5", "."],
        [".", ".", ".", "$", ".", "*", ".", ".", ".", "."],
        [".", "6", "6", "4", ".", "5", "9", "8", ".", "."],
    ]
    n = None
    number_mask = [
        [0, 0, 0, n, n, 1, 1, 1, n, n],
        [n, n, n, n, n, n, n, n, n, n],
        [n, n, 2, 2, n, n, 3, 3, 3, n],
        [n, n, n, n, n, n, n, n, n, n],
        [4, 4, 4, n, n, n, n, n, n, n],
        [n, n, n, n, n, n, n, 5, 5, n],
        [n, n, 6, 6, 6, n, n, n, n, n],
        [n, n, n, n, n, n, 7, 7, 7, n],
        [n, n, n, n, n, n, n, n, n, n],
        [n, 8, 8, 8, n, 9, 9, 9, n, n],
    ]
    result = get_number_mask(raw_matrix)
    assert result == number_mask


def test_has_symbol_neighbor():
    symbols = ["$", "#", "*"]
    raw_matrix = [
        ["4", "6", "7", ".", ".", "1", "1", "4", ".", "."],
        [".", ".", ".", "*", ".", ".", ".", ".", ".", "."],
        [".", ".", "3", "5", ".", ".", "6", "3", "3", "."],
        [".", ".", ".", ".", ".", ".", "#", ".", ".", "."],
        ["6", "1", "7", "*", ".", ".", ".", ".", ".", "."],
        [".", ".", ".", ".", ".", "+", ".", "5", "8", "."],
        [".", ".", "5", "9", "2", ".", ".", ".", ".", "."],
        [".", ".", ".", ".", ".", ".", "7", "5", "5", "."],
        [".", ".", ".", "$", ".", "*", ".", ".", ".", "."],
        [".", "6", "6", "4", ".", "5", "9", "8", ".", "."],
    ]
    loc_true = (2, 0)  # the 7
    result = has_symbol_neighbor(raw_matrix, loc_true, symbols)
    assert result is True
    loc_true = (1, 4)  # the 1
    result = has_symbol_neighbor(raw_matrix, loc_true, symbols)
    assert result is False
